@model IEnumerable<FoodHub.Models.Order>
@{
    ViewData["Title"] = "Orders";
   Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="container mt-5">
    <h2 class="fw-bold text-warning mb-4">Customer Orders</h2>

    <table class="table table-hover shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Total (Rs.)</th>
                <th>Status</th>
                <th>Payment Status</th> <!-- âœ… Added -->
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var order in Model)
            {
                <tr>
                    <td>@order.Id</td>
                    <td>@order.User?.FullName</td>
                    <td>@order.TotalAmount.ToString("N2")</td>
                    <td>
                        <span class="badge bg-@(order.Status == "Delivered" ? "success" : order.Status == "Confirmed" ? "info" : "secondary")">
                            @order.Status
                        </span>
                    </td>
                    <td>
                        @* <span class="badge bg-@(order.Payment?.PaymentStatus == "Paid" ? "success" : "warning")">
                            @order.Payment?.PaymentStatus ?? "Pending"
                        </span> *@
                        @* <span class="badge bg-@(order.Payment != null && order.Payment.PaymentStatus == "Paid" ? "success" : "warning")">
                            @(order.Payment == null ? "Pending" : order.Payment.PaymentStatus)
                        </span> *@
                          <span class="badge @(order.Payment != null && 
                         (order.Payment.PaymentStatus.Equals("Paid", StringComparison.OrdinalIgnoreCase) || 
                          order.Payment.PaymentStatus.Equals("Success", StringComparison.OrdinalIgnoreCase)) 
                         ? "bg-success" 
                         : "bg-warning text-dark")">
        @(order.Payment == null ? "Pending" : order.Payment.PaymentStatus)
    </span>
                    </td>
                    <td>@order.CreatedAt.ToString("dd-MMM-yyyy hh:mm tt")</td>
                    <td>
                        <a asp-action="Details" asp-route-id="@order.Id" class="btn btn-sm btn-outline-primary">
                            View
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
